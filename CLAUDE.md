# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Commands

### Development Commands
- `npm run dev` - Start development server on http://localhost:3000
- `npm run build` - Build the application (automatically runs extract-books first)
- `npm run start` - Start production server
- `npm run lint` - Run ESLint for code quality checks
- `npm run extract-books` - Extract book data from kindle/ directory to data/books.json

### Data Pipeline
The data extraction process requires:
1. Kindle markdown files in `/kindle` directory (from Obsidian Kindle Highlights plugin)
2. Run `npm run extract-books` to parse markdown files and generate JSON data
3. The build process automatically runs extract-books before building

## Architecture

### Data Flow
This is a Kindle book showcase built with Next.js that displays personal reading collection:

1. **Data Source**: Markdown files in `/kindle` directory generated by Obsidian Kindle Highlights plugin
2. **Data Processing**: `extract-books.js` parses YAML frontmatter and extracts highlights from markdown files
3. **Data Storage**: Processed data saved to `data/books.json` for static consumption
4. **Frontend**: Next.js app renders book cards with filtering, search, and statistics

### Key Components
- **BookCard**: Displays book cover, metadata, highlights, and Amazon links with category badges
- **HomePage**: Main page with search/filter functionality, statistics dashboard, and responsive grid
- **extract-books.js**: Node.js script that processes Obsidian kindle exports into structured JSON

### Data Structure
Books contain: title, author, ASIN, cover image URL (enhanced to 400px), highlights count, category (auto-categorized), selected highlights, and Amazon purchase links.

### Styling Architecture
- Uses Tailwind CSS with responsive design patterns
- Category-based color coding system in BookCard
- Japanese font optimization in layout
- Mobile-first responsive grid (1→2→3→4 columns)

### Image Handling
- Amazon book cover images automatically enhanced from 160px to 400px resolution
- Next.js Image component with lazy loading and optimization
- Fallback image handling for missing covers

## Important File Paths
- `/kindle/` - Required directory for Obsidian Kindle Highlights markdown files
- `data/books.json` - Generated book data (public static file)
- `extract-books.js` - Data extraction script (processes line 5: kindleDir path)
- `components/BookCard.tsx` - Book display component with category colors (line 22-29)